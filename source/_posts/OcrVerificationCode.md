---
title: 简单的验证码识别
date: 2017-05-16 19:25:56
tags:
- Verification Code
- 验证码识别
- 验证码
categories: Technical articles
---
{% blockquote %}
  一幅图像可以定义为一个二维数组f(x,y)，这里x，y是空间坐标，而在任何一对空间坐标(x,y)上的幅值f称为该点图像的强度或灰度。当x，y和幅值f为有限的、离散的数值时，称该图像为数字图像。
{% endblockquote %}
## 图像预处理
   主要是对图像进行取字模、灰度化、二值化、去除干扰线。
   *  **取字模：** 取字模时，我们需要多下载几张图片，使这些图片中，包括所有的字符
   {% asset_img 字模.jpg  字模 image %}    

   * **对图片特点进行分析：** 找出规律
   {% asset_img 分析图像.png 分析图像 image %}    

   * **灰度化：** 遍历图像的像素点，根据图片的x,y位置确定像素点，获取该点的RGB值，分析该点的红、绿、蓝值，设个阈值处理，将图片灰度化
    {% asset_img 灰度化.jpg 灰度化 image %}    

   * **二值化：** 把灰度化后的灰度级减少到1位2个灰度级，就得到一副二值图，二值图像中的数据全部是0或1
   {% asset_img 二值化.jpg 二值化 image %}    

   * **去除干扰线：**  获取每个像素点的周围8个像素值，如果周围大于3个点是黑点（根据实际情况设定），就把它设为白点，其它全设为黑点  就得到上图
   {% asset_img 去除干扰线.jpg 去除干扰线 image %}    

## 字符切割
  根据找出的规律对图片进行切割，如果没有规律可以根据算法切割
  （本人采取简单算法切割：以X轴横向扫描，计算每个Y轴白点的像素，当Y轴的白点超过一个值（根据图片自己设定），记下此时的X轴坐标为：X1，当Y轴白点继续大于设定值就继续往后扫描，当Y轴白点为0时，记下此时的X轴坐标为：X2，判断这个距离是否有一个字符的宽度，如果有就认为这是一个字符的宽度，开始纵向切割，然后再横向切割）

   {% asset_img 纵向切割.png 纵向切割 image %}    


   纵向切割后得到的图    

   {% asset_img 横向切割.png 横向切割 image %}    


   横向切得到的图    


## 训练字库
 取去噪后的图片，以验证码内容命名，如下图：
 {% asset_img 训练字库1.jpg 训练字库1 image %}    

 用写好的切割代码，对图片进行切割保存并命名：    

  {% asset_img 训练字库2.jpg 训练字库2 image %}    

## 识别输出
读取需要识别图片与图片库进行对比，在一定误差允许范围内，取图片库误差最小的图片，并获取图片名的第一个字符   
{% asset_img 识别输出.png 识别输出 image %}    

如上图图片在识别时被被切割4份后，拿每份与图片库图片比较，如果此时图片库2-17.jpg与其误差最小，就取2这个字符
